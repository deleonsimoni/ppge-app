<div class="container">
  <div class="row justify-content-between">
    <div class="section-header" mat-dialog-title>
      <h2>Critério de Homologação</h2>
    </div>
  </div>
  <div class="row justify-content-end mb-5">
    <div class="col-auto">
      <button type="button" (click)="toggleEditar(!flagEdit)" mat-raised-button color="primary"
        [ngStyle]="{'background-color': !flagEdit ? 'green' : ''}">
        {{flagEdit ? 'Voltar' : 'Adicionar novo'}}
      </button>

    </div>
  </div>
  
  <form *ngIf="flagEdit; else elseEdit" [formGroup]="form" class="reviewer container mb-5" (ngSubmit)="onSubmit()">
  
    <div class="form-row justify-content-center">
        <div class="form-group col-md-12">
          <h4>Título do Critério de Homologação <span style="color: #7a7a7a;">(não será exibido para os usuários)</span></h4>
          <input type="text" class="form-control" placeholder="Título do critério" formControlName="title" />
        </div>
    </div>
    <h2>Critérios </h2>
    <div formArrayName="questions" class="container">
      
      <div *ngFor="let question of questions.controls; let i = index" class="row mb-3">
        <div class="col-11">
          <input type="text" class="form-control" placeholder="Critério" [formControlName]="i" />
        </div>
        <div class="col-1">
          <button mat-icon-button color="warn" type="button" (click)="removeQuestion(i)"><mat-icon>delete</mat-icon></button>
        </div>
      </div>
      
      <div class="row justify-content-end">
        <div class="col-auto">
          <button mat-raised-button type="button" class="mt-3 add-button" (click)="addQuestionsLine()">Incluir Critério</button>
        </div>
      </div>
    </div>
    <button mat-raised-button color="primary" class="w-100 mt-5">SALVAR</button>
  </form>
  
  <ng-template #elseEdit class="row text-center" data-aos-delay="200">
    <div class="card-body">
        <div class="text-center">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Título</th>
                        <th scope="col">Atualizado em:</th>
                        <th scope="col">Ações</th>
                    </tr>
                </thead>
                <tbody>

                    <tr *ngFor="let criterio of listCriterio; let i= index">
                      <th scope="row">{{ criterio.title }}</th>
                      <th scope="row">{{ criterio.updatedAt | date: 'dd/MM/yyyy HH:mm:ss' }}</th>
                      <th scope="row">
                        <span matTooltip="Excluir" matTooltipPosition="above"
                          class="material-icons md-18 btn" (click)="deleteCriterioHomologacaoById(criterio._id, criterio.title)">delete</span>
                        <span matTooltip="Editar" matTooltipPosition="above"
                          class="material-icons md-18 btn" (click)="toggleEditar(true, criterio)">edit_square</span>
                      </th>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
  </ng-template>
</div>

<div class="container">

</div>
