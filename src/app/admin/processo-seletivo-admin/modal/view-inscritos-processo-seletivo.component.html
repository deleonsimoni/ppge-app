<h1 mat-dialog-title>{{data.title}}</h1>
<div mat-dialog-content>
    
    <div *ngIf="!flagShowInfoUser" class="form-group col-md-12">
        <h4>Pesquisar pelo CPF ou Nome</h4>
        <input type="text" class="form-control" placeholder="Pesquisar pelo CPF ou Nome" [(ngModel)]="searchText"/>
    </div>
    <div *ngIf="!flagShowInfoUser" class="row justify-content-end m-4 mb-5">
        <button type="button" mat-raised-button color="primary" (click)="searchByCPFOrName()">
        Pesquisar
        </button>
    </div>
    <table *ngIf="!flagShowInfoUser; else infoUserBlock" class="table">
        <thead>
            <tr>
                <th scope="col">CPF</th>
                <th scope="col" style="width: 50%;">Nome</th>
                <th scope="col">Ficha de inscrição</th>
            </tr>
        </thead>
        <tbody>
            <ng-container *ngFor="let di of data.users; let i = index">
                <tr *ngIf="i < limit">
                    <th scope="row">{{ di.idUser.cpf}}</th>
                    <th scope="row" style="width: 50%;">{{ di.idUser.fullname?.toUpperCase()}}</th>
                    <th scope="row">
                        <span class="material-icons md-18 btn" (click)="getUserInfo(di.idUser._id)">description</span>
                    </th>
                </tr>
            </ng-container>
        </tbody>
    </table>
    <ng-template #infoUserBlock>
        <div class="container" style="word-break: break-word;">
            <div class="row justify-content-center text-center">
                <h2>Dados cadastrais</h2>
            </div>
            <div class="row mt-3">
                <div class="col-md-6">
                    <label><strong>Nome Completo</strong></label>
                    <p>{{infoUser.fullname != null ? infoUser.fullname : '-'}}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Nome social</strong></label>
                    <p>{{infoUser.socialname != null ? infoUser.socialname : '-'}}</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-4">
                    <label><strong>CPF</strong></label>
                    <p>{{infoUser.cpf != null ? infoUser.cpf : '-'}}</p>
                </div>
                <div class="col-md-4">
                    <label><strong>Data de nascimento</strong></label>
                    <p>{{ infoUser.dataNiver != null ? (infoUser.dataNiver | date: 'dd/MM/yyyy') : '-' }}</p>
                </div>
                <div class="col-md-4">
                    <label><strong>Nacionalidade</strong></label>
                    <p>{{infoUser.nacionalidade != null ? infoUser.nacionalidade : '-'}}</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-4">
                    <label><strong>Identidade</strong></label>
                    <p>{{infoUser.rg != null ? infoUser.rg : '-'}}</p>
                </div>
                <div class="col-md-4">
                    <label><strong>Órgão Emissor</strong></label>
                    <p>{{infoUser.rgEmissor != null ? infoUser.rgEmissor : '-'}}</p>
                </div>
                <div class="col-md-4">
                    <label><strong>Passaporte</strong></label>
                    <p>{{infoUser.passaporte != null ? infoUser.passaporte : '-'}}</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-6">
                    <label><strong>Cor</strong></label>
                    <p>{{infoUser.cor != null ? infoUser.cor : '-'}}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Gênero</strong></label>
                    <p>{{infoUser.genero != null ? infoUser.genero : '-'}}</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-4">
                    <label><strong>Possui alguma deficiência?</strong></label>
                    <p>{{infoUser.deficiencia != null ? infoUser.deficiencia : '-'}}</p>
                </div>
            </div>
            <hr>
            <div class="row mt-3">
                <div class="col-md-4">
                    <label><strong>Email</strong></label>
                    <p>{{infoUser.email != null ? infoUser.email : '-'}}</p>
                </div>
                <div class="col-md-4">
                    <label><strong>Telefone</strong></label>
                    <p>{{infoUser.telefone != null ? infoUser.telefone : '-'}}</p>
                </div>
                <div class="col-md-4">
                    <label><strong>Celular</strong></label>
                    <p>{{infoUser.celular != null ? infoUser.celular : '-'}}</p>
                </div>
            </div>
            <hr>
            <div class="row mt-3">

                <!-- Endereço -->
                <div class="col-md-4">
                    <label><strong>Código postal</strong></label>
                    <p>{{infoUser.cep != null ? infoUser.cep : '-'}}</p>
                </div>
                <div class="col-md-8">
                    <label><strong>Endereço</strong></label>
                    <p>{{infoUser.endereco != null ? infoUser.endereco : '-'}}</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-4">
                    <label><strong>Cidade</strong></label>
                    <p>{{infoUser.cidade != null ? infoUser.cidade : '-'}}</p>
                </div>
                <div class="col-md-4">
                    <label><strong>Estado</strong></label>
                    <p>{{infoUser.estado != null ? infoUser.estado : '-'}}</p>
                </div>
                <div class="col-md-4">
                    <label><strong>Bairro</strong></label>
                    <p>{{infoUser.bairro != null ? infoUser.bairro : '-'}}</p>
                </div>
            </div>
            <hr>
            <div class="row mt-3">
                <div class="col-md-6">
                    <label><strong>Ocupação atual / Cargo</strong></label>
                    <p>{{infoUser.cargo != null ? infoUser.cargo : '-'}}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Instituição / Empresa</strong></label>
                    <p>{{infoUser.empresa != null ? infoUser.empresa : '-'}}</p>
                </div>
            </div>
            <hr>
            <div class="row justify-content-center text-center">
                <h2>Dados da inscrição</h2>
            </div>
            <div class="row mt-3">
                <div class="col-md-12">
                    <label><strong>Linha de pesquisa</strong></label>
                    <p>{{ infoUserProcesso?.linhaPesquisa['pt-br']?.title }}</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-6">
                    <label><strong>Orientador (1<sup>a</sup> opção)</strong></label>
                    <p>{{ infoUserProcesso?.primeiroOrientador?.fullName }}</p>
                </div>
                <div class="col-md-6" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO">
                    <label><strong>Orientador (2<sup>a</sup> opção)</strong></label>
                    <p>{{ infoUserProcesso?.segundoOrientador?.fullName }}</p>
                </div>
            </div>
            <hr>
            <div class="row mt-3">
                <div class="col-md-12">
                    <label><strong>Opção de vaga</strong></label>
                    <p>{{ typeOpcaoVagaEnumToSubscription[infoUserProcesso.opcaoVaga] }}</p>
                </div>
                <div *ngIf="infoUserProcesso.opcaoVaga == typeOpcaoVagaEnum.COTAS_ACOES_AFIRMATIVAS" class="col-md-12">
                    <label><strong>Descrição da cota</strong></label>
                    <p>{{ infoUserProcesso.opcaoVagaCotaSub }}</p>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-5">
                    <label><strong>Possui alguma deficiência?</strong></label>
                    <p>{{ infoUserProcesso.deficiencia != null ? (infoUserProcesso.deficiencia ? "SIM" : "NÃO") : "-" }}</p>
                </div>
                <div *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO" class="col-md-7">
                    <label><strong>Qual deficiência?</strong></label>
                    <p>{{infoUserProcesso.qualDeficiencia != null ? infoUserProcesso.qualDeficiencia : '-'}}</p>
                </div>
            </div>
            <div *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO" class="row mt-3">
                <div class="col-md-12">
                    <label><strong>Em caso de deficiência, necessitará de atendimento especial ou recurso de acessibilidade e tecnologia assistiva durante o processo seletivo?</strong></label>
                    <p>{{infoUserProcesso.atendimentoEspecialDeficiencia != null ? (infoUserProcesso.atendimentoEspecialDeficiencia ? "SIM" : "NÃO") : '-'}}</p>
                </div>
                <div class="col-md-12">
                    <label><strong>Se sim, qual?</strong></label>
                    <p>{{infoUserProcesso.deficienciaSub != null ? infoUserProcesso.deficienciaSub : '-'}}</p>
                </div>
                <div class="col-md-12">
                    <label><strong>É mãe de filhos/as menores de 5 anos de idade?</strong></label>
                    <p>{{infoUserProcesso.isMaeFilhoMenorCinco != null ? (infoUserProcesso.isMaeFilhoMenorCinco ? "SIM" : "NÃO") : '-'}}</p>
                </div>
                <div class="col-md-12">
                    <label><strong>Reside a uma distância superior a 250 km do município do Rio de Janeiro e deseja realizar a arguição em formato remoto?</strong></label>
                    <p>{{infoUserProcesso.resideDistanciaLonga != null ? (infoUserProcesso.resideDistanciaLonga ? "SIM" : "NÃO") : '-'}}</p>
                </div>
                <div class="col-md-12">
                    <label><strong>Aceite da declaração de redidência a uma distância superior a 250 km do município do Rio de Janeiro e realização da arguição em formato remoto.</strong></label>
                    <p>{{infoUserProcesso.declaracaoResideDistanciaLonga != null ? (infoUserProcesso.declaracaoResideDistanciaLonga ? "SIM" : "NÃO") : '-'}}</p>
                </div>
            </div>
            <hr>
            <div class="row justify-content-center text-center">
                <h2>Graduação</h2>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <label><strong>Curso</strong></label>
                    <p>{{ infoUserProcesso.graduacao.nome }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Instituição</strong></label>
                    <p>{{ infoUserProcesso.graduacao.instituicao }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Ano de início</strong></label>
                    <p>{{ infoUserProcesso.graduacao.anoInicio }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Ano de conclusão</strong></label>
                    <p>{{ infoUserProcesso.graduacao.anoConclusao }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Aceitou termo</strong></label>
                    <p>{{ infoUserProcesso.graduacao.termoNaoColacaoGrau ? "Sim" : "Não" }}</p>
                </div>
            </div>
            <hr>
            <div class="row justify-content-center text-center">
                <h2>Pós-graduação (especialização)</h2>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <label><strong>Curso</strong></label>
                    <p>{{ infoUserProcesso.posGraduacao.nome }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Instituição</strong></label>
                    <p>{{ infoUserProcesso.posGraduacao.instituicao }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Ano de início</strong></label>
                    <p>{{ infoUserProcesso.posGraduacao.anoInicio }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Ano de conclusão</strong></label>
                    <p>{{ infoUserProcesso.posGraduacao.anoConclusao }}</p>
                </div>
            </div>
            <div *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.DOUTORADO" class="row mt-3">
                <div class="col-md-12">
                    <label><strong>Outros cursos</strong></label>
                    <p>{{infoUserProcesso.outrosCursos != null ? (infoUserProcesso.outrosCursos ? "SIM" : "NÃO") : '-'}}</p>
                </div>
            </div>
            <hr>
            <div class="row justify-content-center text-center"
                *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.DOUTORADO">
                <h2>Pós-graduação (mestrado)</h2>
            </div>
            <div class="row" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.DOUTORADO">
                <div class="col-md-6">
                    <label><strong>Curso</strong></label>
                    <p>{{ infoUserProcesso.posGraduacaoMestrado.nome }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Instituição</strong></label>
                    <p>{{ infoUserProcesso.posGraduacaoMestrado.instituicao }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Ano de início</strong></label>
                    <p>{{ infoUserProcesso.posGraduacaoMestrado.anoInicio }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Ano de conclusão</strong></label>
                    <p>{{ infoUserProcesso.posGraduacaoMestrado.anoConclusao }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Título de dissertação</strong></label>
                    <p>{{ infoUserProcesso.posGraduacaoMestrado.tituloDissertacao }}</p>
                </div>
                <div class="col-md-6">
                    <label><strong>Nome do(a) orientador(a)</strong></label>
                    <p>{{ infoUserProcesso.posGraduacaoMestrado.nomeOrientador }}</p>
                </div>
            </div>

            <hr>
            <div class="row mb-3">
                <div class="col-md-6 mb-3">
                    <label class="mb-0"><strong>Currículo Lattes</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.pathLattes)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO">
                    <label class="mb-0"><strong>Pré-projeto</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.pathPreProj)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO">
                    <label class="mb-0"><strong>Comprovante de conclusão de graduação</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.fileConclusaoGraduacao)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO">
                    <label class="mb-0"><strong>Comprovante da autodeclaração de candidatos/as indígenas</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.fileIndigena)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO">
                    <label class="mb-0"><strong>Comprovantes da condição de pessoa com deficiência.</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.fileCondicaoDeficiencia)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO">
                    <label class="mb-0"><strong>Comprovantes da condição de pessoa com deficiência (pareceres e/ou relatórios pedagógicos)</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.fileCondicaoDeficienciaDois)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO">
                    <label class="mb-0"><strong>Parentalidade - Certidão de Nascimento</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.fileCertidaoNascimentoFilho)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.MESTRADO">
                    <label class="mb-0"><strong>Comprovante de residência</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.fileComprovanteResidencia)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>


                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.DOUTORADO">
                    <label class="mb-0"><strong>Projeto de Tese</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.pathProjetoTese)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.DOUTORADO">
                    <label class="mb-0"><strong>Principal publicação</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.pathPrincipalPubli)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
                <div class="col-md-6 mb-3" *ngIf="infoUserProcesso.tipoFormulario == typeGraduateEnum.DOUTORADO">
                    <label class="mb-0"><strong>Comprovante de pagamento</strong></label>
                    <br>
                    <a [href]="addInicioS3Url(infoUserProcesso.files.fileComprovantePagamento)">
                        <i style="font-size: 35px;" class="bi bi-filetype-pdf"></i>
                    </a>
                </div>
            </div>

        </div>
        <button *ngIf="infoUserProcesso.perfilCandidato" mat-raised-button color="accent" (click)="abrirPerfilCandidatoModal(infoUserProcesso.perfilCandidato)">Ver Perfil do Candidato</button>
    </ng-template>
    <app-pagination *ngIf="!flagShowInfoUser && (data.users.length > 0 || page > 1)" [page]="page" [qtdItems]="data.users.length" [limit]="limit"
      (onPagination)="onPagination($event)">
    </app-pagination>
</div>
<hr>
<div mat-dialog-actions>
    <button mat-raised-button color="accent" (click)="onNoClick()">Fechar</button>
    <button type="button" (click)="voltar()" mat-raised-button color="primary" *ngIf="flagShowInfoUser">Voltar</button>
</div>